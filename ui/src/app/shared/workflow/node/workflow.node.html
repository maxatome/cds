<div class="workflowNode">
    <div class="nodePipeline pointing" [class.running]="currentNodeRun?.status === pipelineStatus.BUILDING || currentNodeRun?.status === pipelineStatus.WAITING"
         [class.building]="currentNodeRun?.status === pipelineStatus.BUILDING || currentNodeRun?.status === pipelineStatus.WAITING"
         [class.success]="currentNodeRun?.status === pipelineStatus.SUCCESS"
         [class.fail]="currentNodeRun?.status === pipelineStatus.FAIL || currentNodeRun?.status === pipelineStatus.STOPPED"
         [class.inactive]="currentNodeRun?.status === pipelineStatus.DISABLED || currentNodeRun?.status === pipelineStatus.SKIPPED"
         [class.active]="node.id === selectedNodeId"
         (click)="goToNodeRun()">

        <!-- Node name + pipeline name -->
        <div class="pipeline">
            <div class="ellipsis">
                <b>{{node.name}}</b>
        </div>

        <!-- version on a semantic ui ribbon -->
        <div class="ui ribbon label top left" *ngIf="currentNodeRun">
            <i class="tag icon"></i>{{ currentNodeRun?.subnumber }}
        </div>

        <!-- application name on a semantic ui ribbon -->
        <a class="ui ribbon label bottom left" [routerLink]="['/project', project.key, 'application', node.context.application?.name]" *ngIf="node.context.application_id && node.context.application_id > 0">
            <i class="rocket icon"></i>{{node.context.application?.name}}
        </a>

        <!-- environment name on a semantic ui ribbon -->
        <a class="ui ribbon label top right" [routerLink]="['/project', project.key]" [queryParams]="{tab: 'environments', envName: node.context.environment?.name}" *ngIf="node.context.environment_id && node.context.environment_id > 0">
            <i class="tree icon"></i>{{node.context.environment?.name}}
        </a>
    </div>
</div>
